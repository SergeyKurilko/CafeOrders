# CafeOrders
## Описание
### Приложение для управления заказами в кафе
Это веб-приложение на Django для управления заказами в кафе. Оно позволяет добавлять, удалять, искать, изменять и отображать заказы. Каждый заказ содержит информацию о номере стола, списке заказанных блюд, общей стоимости и статусе.

## Содержание

1. [Описание](#Описание)
2. [Функциональность](#функциональность)
3. [Технологии](#технологии)
4. [Установка](#установка)
5. [Использование](#использование)
6. [Тестирование](#тестирование)
7. [Контакты](#контакты)


## Функциональность
  - Добавление заказа: Ввод номера стола и списка блюд с ценами. Заказ автоматически получает уникальный ID, рассчитывается общая стоимость и устанавливается статус "в ожидании".
  - Удаление заказа: Удаление заказа по его ID.
  - Поиск заказа: Поиск заказов по номеру стола, статусу или по ID.
  - Отображение всех заказов: Таблица с информацией о всех заказах (ID, номер стола, список блюд, общая стоимость, статус).
  - Изменение статуса заказа: Изменение статуса заказа.
  - Расчет выручки за смену: Расчет общей выручки по всем оплаченным заказам.

## Технологии
  - **Python 3.10**
  - **Django 5.1:** Основной фреймворк.
  - **Django REST Framework 3.15.2:** Для API.
  - **python-dotenv:** Для использования переменных окружения.
  - **HTML/CSS/JavaScript:**: Для фронтенда.
  - **Bootstrap 5:** Для стилизации.
  - **Jquery 3.7.1:** Для ajax запросов и фронтенда.

## Установка
1. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/SergeyKurilko/CafeOrders.git
   ```
2. Перейдите в каталог cafeorders
   ```bash
   cd cafeorders
   ```
3. Создайте виртуальное окружение и активируйте его:
   ```bash
   python3 -m venv venv
   source venv/bin/activate 
   ```
4. Установите зависимости:
   ```bash
   pip install -r requirements.txt
   ```
5. Создайте в каталоге проекта переменную .env для хранения переменных окружения и запишите в него сгенерированный SECRET_KEY:
   - Генерирование SECRET_KEY:
     В терминале, находясь в каталоге, где расположен manage.py, введите по порядку

     Запуск интерактивной консоли Django
     ```bash
     python manage.py shell
     ```

     Импортирование utils
     ```
     from django.core.management import utils
     ```

     Генерирование ключа
     ```
     utils.get_random_secret_key()
     ```

   - Скопируйте полученный ключ
   - Откройте файл .env и вставьте в него сгенерированный ключ вот так:
   ```python
   DJANGO_SECRET_KEY='тут_сгенерированный_ключ'
   ```  
5. Создайте и выполните миграции:
   ```bash
   python manage.py makemigrations
   python manage.py migrate
   ```
6. Создайте суперпользователя:
   ```bash
   python manage.py createsuperuser
   ```
   
7. Запустите сервер разработки django:
   ```bash
   python manage.py runserver
   ```

8. Создайте блюда для работы с заказами:
   - В браузере перейдите по адресу http://127.0.0.1:8000/admin/  
   - Войдите в панель администратора под логином и паролем суперпользователя, нажмите в открывшимся меню ссылку "Блюда" и добавьте несколько блюд.

9. Запустите приложение в браузере, перейдя по адресу: http://127.0.0.1:8000/

## Использование
### Веб-интерфейс
#### Главная страница : 
Отображает две кнопки "Все заказы" - для перехода к списку всех заказов и "Добавить заказ" - для добавления нового заказа.

#### Добавление заказа: 
Первый способ:
На главной странице нажмите "Добавить заказ", в открывшейся форме заполните поле "Номер стола" и выберите блюда для заказа. Затем нажмите "Создать заказ".

Второй способ:
В навигационной панели, вверху эрана выберите в меню "заказы -> создать заказ", далее, по аналогии с первым способом запоните форму.

#### Удаление заказа: 
Откройте карточку заказа:
В карточке есть кнопка "Удалить заказ". Нажмите на эту кнопку, а затем подтвердите удаление, чтобы удалить заказ.   
![Видеоинструкция удаления заказа](https://media.giphy.com/media/0QvtqnPTELYAMKJPsa/giphy.gif)

#### Изменение статуса: 
Откройте карточку заказа:
Напротив надписи "Статус заказа:" нажмите "Изменить статус", выберите нужный статус из предоставленного выпадающего меню и нажмите "сохранить".   
![Видеоинструкция изменения статуса заказа](https://media2.giphy.com/media/v1.Y2lkPTc5MGI3NjExNHdwNXM1bTh3bWpjZXhiMmo0NDQ3eWIyd3B3c2Q2bWlsdG5zeHh5YiZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/E6CDO4BEAaVEXywH4x/giphy.gif)


#### Поиск заказа:
В навигационной панели, вверху экрана найдите поле "Поиск заказов", выберите способ поиска из выпадающего списка.
В зависимости от выбранного поля введите данные для поиска:
- Поиск заказов по ID: введите ID заказа;
- Поиск заказов по номеру стола: введите номер стола;
- Поиск заказов по статусу: выберите статус из предложенного списка.  

Поиск заказа по ID  
![Поиск заказа по ID](https://media2.giphy.com/media/v1.Y2lkPTc5MGI3NjExbmE5YzhhNjB6bWhqaGU5Y3ViODNjbm13YWh4d3h4dGxucWNsbWlndCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/1wA5fKuaFCWMgjaPML/giphy.gif)  

Поиск заказа по номеру стола  
![Поиск заказа по столу](https://media3.giphy.com/media/v1.Y2lkPTc5MGI3NjExOWQxd2RmdnNmcGU3ZHV0ejg4MXBxcHhtNnhqMmhiYjZpNnBnM3p0byZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/cp2W9zzG2RrkZVZ3xu/giphy.gif)  

Поиск заказа по статусу   
![Поиск заказа по статусу](https://media1.giphy.com/media/v1.Y2lkPTc5MGI3NjExN2U5Nmk4ZDRoaXkxdTVzcXNmc3NwZ3k5dmd2c3YyMzluMDBmeHRwbiZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/ylQuFxPALuTQYcxYH5/giphy.gif)  

#### Расчет выручки: 
В навигационной панели, вверху экрана нажмите "Выручка ₽". После нажатия вверху экрана отобразится информация об общей выручке по всем заказам со статусам "Оплачено".

### REST API
#### Приложение также предоставляет REST API для управления заказами. Примеры запросов:
- Создать заказ:
```
POST /api/orders/<id>/
```
Content:
```
{
    "table_number": int,
    "items": [item_id, item_id, item_id],
}
```

- Получить список всех заказов:
```
GET /api/orders/
```

- Получить заказ по ID
```
GET /api/orders/<id>/
```

- Изменить заказ:
```
PUT /api/orders/<id>/
```
Content:
```
{
    "table_number": int,
    "items": [item_id, item_id, item_id],
    "status": "paid"
}
```

- Удалить заказ:
```
DELETE api/orders/<id>/
```

## Тестирование
Для тестирования приложения используются модульные тесты. Чтобы запустить тесты, выполните команду:
```
python manage.py test
```

## Контакты
email: kurservlad@yandex.ru 
telegram: @Devidbrown
